<!DOCTYPE html>
<html>
<head>
    <title>Azure Policy Initiative Comparison</title>
    <style>
        body { font-family: Arial, sans-serif; margin: 20px; }
        .header { background-color: #0078d4; color: white; padding: 20px; border-radius: 5px; }
        .section { margin: 20px 0; padding: 15px; border: 1px solid #ddd; border-radius: 5px; }
        .overlap { background-color: #d4edda; }
        .missing { background-color: #f8d7da; }
        .extra { background-color: #e2e3f1; }
        .policy-list { margin: 10px 0; }
        .policy-item { margin: 5px 0; padding: 5px; background-color: #f8f9fa; border-left: 3px solid #007bff; }
        table { width: 100%; border-collapse: collapse; margin: 10px 0; }
        th, td { border: 1px solid #ddd; padding: 8px; text-align: left; }
        th { background-color: #f2f2f2; }
    </style>
</head>
<body>
    <div class="header">
        <h1>Azure Policy Initiative Comparison Report</h1>
        <p>Generated on: 2025-08-28 15:52:19</p>
    </div>

    <div class="section">
        <h2>Initiative Details</h2>
        <table>
            <tr><th>Aspect</th><th>Source Initiative</th><th>Compare Initiative</th></tr>
            <tr><td>Name</td><td>CIS Microsoft Azure Foundations Benchmark v2.0.0</td><td>Itility Cloud Spaces - Policy baseline configuration for CIS Level 1</td></tr>
            <tr><td>Type</td><td>Built-in</td><td>Custom</td></tr>
            <tr><td>Total Policies</td><td>111</td><td>70</td></tr>
        </table>
    </div>

    <div class="section overlap">
        <h2>Policy Overlap (58 policies)</h2>
        <p>These policies exist in both initiatives:</p>
        <div class="policy-list"><div class='policy-item'>Public network access should be disabled for PostgreSQL flexible servers</div><div class='policy-item'>An activity log alert should exist for specific Security operations</div><div class='policy-item'>An activity log alert should exist for specific Security operations</div><div class='policy-item'>An activity log alert should exist for specific Security operations</div><div class='policy-item'>Storage accounts should have the specified minimum TLS version</div><div class='policy-item'>Enforce SSL connection should be enabled for MySQL database servers</div><div class='policy-item'>Infrastructure encryption should be enabled for Azure Database for PostgreSQL servers</div><div class='policy-item'>Public network access should be disabled for PostgreSQL servers</div><div class='policy-item'>Machines should be configured to periodically check for missing system updates</div><div class='policy-item'>Subscriptions should have a contact email address for security issues</div><div class='policy-item'>Email notification for high severity alerts should be enabled</div><div class='policy-item'>Secure transfer to storage accounts should be enabled</div><div class='policy-item'>Storage accounts should restrict network access</div><div class='policy-item'>Storage accounts should restrict network access using virtual network rules</div><div class='policy-item'>Storage accounts should use private link</div><div class='policy-item'>Auditing on SQL server should be enabled</div><div class='policy-item'>An Azure Active Directory administrator should be provisioned for SQL servers</div><div class='policy-item'>Transparent Data Encryption on SQL databases should be enabled</div><div class='policy-item'>SQL servers with auditing to storage account destination should be configured with 90 days retention or higher</div><div class='policy-item'>Enforce SSL connection should be enabled for PostgreSQL database servers</div><div class='policy-item'>Log checkpoints should be enabled for PostgreSQL database servers</div><div class='policy-item'>Log connections should be enabled for PostgreSQL database servers</div><div class='policy-item'>Disconnections should be logged for PostgreSQL database servers.</div><div class='policy-item'>Connection throttling should be enabled for PostgreSQL database servers</div><div class='policy-item'>Cosmos DB database accounts should have local authentication methods disabled</div><div class='policy-item'>Resource logs in Key Vault should be enabled</div><div class='policy-item'>Storage account public access should be disallowed</div><div class='policy-item'>An activity log alert should exist for specific Policy operations</div><div class='policy-item'>An activity log alert should exist for specific Policy operations</div><div class='policy-item'>An activity log alert should exist for specific Administrative operations</div><div class='policy-item'>An activity log alert should exist for specific Administrative operations</div><div class='policy-item'>An activity log alert should exist for specific Administrative operations</div><div class='policy-item'>An activity log alert should exist for specific Administrative operations</div><div class='policy-item'>An activity log alert should exist for specific Administrative operations</div><div class='policy-item'>An activity log alert should exist for specific Administrative operations</div><div class='policy-item'>An activity log alert should exist for specific Administrative operations</div><div class='policy-item'>An activity log alert should exist for specific Administrative operations</div><div class='policy-item'>An activity log alert should exist for specific Administrative operations</div><div class='policy-item'>An activity log alert should exist for specific Administrative operations</div><div class='policy-item'>Management ports should be closed on your virtual machines</div><div class='policy-item'>Audit VMs that do not use managed disks</div><div class='policy-item'>Only approved VM extensions should be installed</div><div class='policy-item'>Key Vault keys should have an expiration date</div><div class='policy-item'>Key vaults should have deletion protection enabled</div><div class='policy-item'>App Service apps should only be accessible over HTTPS</div><div class='policy-item'>Function apps should use the latest TLS version</div><div class='policy-item'>App Service apps should use the latest TLS version</div><div class='policy-item'>Function apps should use managed identity</div><div class='policy-item'>App Service apps should use managed identity</div><div class='policy-item'>App Service app slots that use PHP should use a specified 'PHP version'</div><div class='policy-item'>App Service apps that use PHP should use a specified 'PHP version'</div><div class='policy-item'>App Service app slots that use Python should use a specified 'Python version'</div><div class='policy-item'>App Service apps that use Python should use a specified 'Python version'</div><div class='policy-item'>Function app slots that use Java should use a specified 'Java version'</div><div class='policy-item'>Function apps should use latest 'HTTP Version'</div><div class='policy-item'>App Service apps should use latest 'HTTP Version'</div><div class='policy-item'>Function apps should require FTPS only</div><div class='policy-item'>App Service apps should require FTPS only</div>        </div>
    </div>

    <div class="section missing">
        <h2>Policies Missing in Compare Initiative (53 policies)</h2>
        <p>These policies from the source initiative are not found in the compare initiative:</p>
        <div class="policy-list"><div class='policy-item'>SQL databases should have vulnerability findings resolved</div><div class='policy-item'>Managed disks should be double encrypted with both platform-managed and customer-managed keys</div><div class='policy-item'>Audit usage of custom RBAC roles</div><div class='policy-item'>Public network access on Azure SQL Database should be disabled</div><div class='policy-item'>Guest accounts with read permissions on Azure resources should be removed</div><div class='policy-item'>Guest accounts with write permissions on Azure resources should be removed</div><div class='policy-item'>Guest accounts with owner permissions on Azure resources should be removed</div><div class='policy-item'>Azure Defender for servers should be enabled</div><div class='policy-item'>Azure Defender for App Service should be enabled</div><div class='policy-item'>Azure Defender for open-source relational databases should be enabled</div><div class='policy-item'>Azure Defender for Azure SQL Database servers should be enabled</div><div class='policy-item'>Azure Defender for SQL servers on machines should be enabled</div><div class='policy-item'>Microsoft Defender for Storage should be enabled</div><div class='policy-item'>Microsoft Defender for Containers should be enabled</div><div class='policy-item'>Microsoft Defender for Azure Cosmos DB should be enabled</div><div class='policy-item'>Azure Defender for Key Vault should be enabled</div><div class='policy-item'>Azure Defender for Resource Manager should be enabled</div><div class='policy-item'>Storage accounts should have infrastructure encryption</div><div class='policy-item'>Storage accounts should allow access from trusted Microsoft services</div><div class='policy-item'>Storage accounts should use customer-managed key for encryption</div><div class='policy-item'>SQL servers should use customer-managed keys to encrypt data at rest</div><div class='policy-item'>SQL managed instances should use customer-managed keys to encrypt data at rest</div><div class='policy-item'>Azure Defender for SQL should be enabled for unprotected Azure SQL servers</div><div class='policy-item'>Azure Defender for SQL should be enabled for unprotected SQL Managed Instances</div><div class='policy-item'>Vulnerability assessment should be enabled on your SQL servers</div><div class='policy-item'>Vulnerability assessment should be enabled on SQL Managed Instance</div><div class='policy-item'>Azure Cosmos DB accounts should have firewall rules</div><div class='policy-item'>CosmosDB accounts should use private link</div><div class='policy-item'>App Service apps should have resource logs enabled</div><div class='policy-item'>Resource logs in Batch accounts should be enabled</div><div class='policy-item'>Resource logs in Azure Data Lake Store should be enabled</div><div class='policy-item'>Resource logs in Data Lake Analytics should be enabled</div><div class='policy-item'>Resource logs in Event Hub should be enabled</div><div class='policy-item'>Resource logs in IoT Hub should be enabled</div><div class='policy-item'>Resource logs in Logic Apps should be enabled</div><div class='policy-item'>Resource logs in Search services should be enabled</div><div class='policy-item'>Resource logs in Service Bus should be enabled</div><div class='policy-item'>Resource logs in Azure Stream Analytics should be enabled</div><div class='policy-item'>Storage account containing the container with activity logs must be encrypted with BYOK</div><div class='policy-item'>All flow log resources should be in enabled state</div><div class='policy-item'>Flow logs should be configured for every network security group</div><div class='policy-item'>Audit flow logs configuration for every virtual network</div><div class='policy-item'>Network Watcher should be enabled</div><div class='policy-item'>Key Vault secrets should have an expiration date</div><div class='policy-item'>Key vaults should have soft delete enabled</div><div class='policy-item'>Azure Key Vault should use RBAC permission model</div><div class='policy-item'>Azure Key Vaults should use private link</div><div class='policy-item'>Keys should have a rotation policy ensuring that their rotation is scheduled within the specified number of days after creation.</div><div class='policy-item'>Function apps should have authentication enabled</div><div class='policy-item'>App Service apps should have authentication enabled</div><div class='policy-item'>[Deprecated]: Function apps should have 'Client Certificates (Incoming client certificates)' enabled</div><div class='policy-item'>[Deprecated]: App Service apps should have 'Client Certificates (Incoming client certificates)' enabled</div><div class='policy-item'>Function apps that use Java should use a specified 'Java version'</div>        </div>
    </div>

    <div class="section extra">
        <h2>Extra Policies in Compare Initiative (24 policies)</h2>
        <p>These policies are in the compare initiative but not in the source initiative:</p>
        <div class="policy-list"><div class='policy-item'>Email notification to subscription owner for high severity alerts should be enabled</div><div class='policy-item'>Storage accounts should disable public network access</div><div class='policy-item'>Linux virtual machines should have Azure Monitor Agent installed</div><div class='policy-item'>Windows virtual machines should have Azure Monitor Agent installed</div><div class='policy-item'>Itility Cloud Spaces - Ensure that storage account access keys are periodically regenerated and reminders sent</div><div class='policy-item'>Itility Cloud Spaces - Ensure that Shared Access Signature Tokens Expire Within an Hour</div><div class='policy-item'>Itility Cloud Spaces - Ensure that Resource Locks are set for Mission-Critical Azure Resources</div><div class='policy-item'>Storage accounts should prevent cross tenant object replication</div><div class='policy-item'>Itility Cloud Spaces - Ensure Soft Delete is Enabled for Azure Containers and Blob Storage</div><div class='policy-item'>Log duration should be enabled for PostgreSQL database servers</div><div class='policy-item'>Itility Cloud Spaces - Require Secure Transport shoud be enabled for MySQL flexible servers</div><div class='policy-item'>Itility Cloud Spaces - Audit diagnostic settings</div><div class='policy-item'>Itility Cloud Spaces - Ensure that Activity Log Alert exists for Create or Update Public IP Address rule</div><div class='policy-item'>Itility Cloud Spaces - Ensure Any of the ASC Default Policy Settings are Not Set to 'Disabled'</div><div class='policy-item'>Itility Cloud Spaces - Ensure Azure Monitor Resource Logging is Enabled for All Services that Support it</div><div class='policy-item'>Itility Cloud Spaces - Ensure that Public IP addresses are Evaluated on a Periodic Basis</div><div class='policy-item'>[Preview]: Secure Boot should be enabled on supported Windows virtual machines</div><div class='policy-item'>[Deprecated]: Auto provisioning of the Log Analytics agent should be enabled on your subscription</div><div class='policy-item'>App Service apps that use Java should use a specified 'Java version'</div><div class='policy-item'>Itility Cloud Spaces - Ensure that network security groups are configured for Databricks subnets</div><div class='policy-item'>Itility Cloud Spaces - Ensure that diagnostic log delivery is configured for Azure Databricks</div><div class='policy-item'>Azure Databricks Workspaces should be in a virtual network</div><div class='policy-item'>Itility Cloud Spaces - Ensure that 'Notify about attack paths with the following risk level (or higher)' is enabled</div><div class='policy-item'>Itility Cloud Spaces - Ensure that 'Default to Microsoft Entra authorization in the Azure portal' is set to 'Enabled'</div>        </div>
    </div>
</body>
</html>
